# X-ray absorption computation analysis

[comment]: <> (```)
[comment]: <> (    Date: 06.07.22)
[comment]: <> (    Author: Carlos Andr√©s Ortiz-Mahecha)
[comment]: <> (```)
[comment]: <> (****)
[comment]: <> (First version: 20.03.23)
[comment]: <> (comment:)
[comment]: <> (First version to obtain core-virtial MO matrices having by values: transition intensities, force oscillator strenght and transition intensity probabilities)
[comment]: <> (Updated as a package - 15.9.23. Other two upgraded versions already exist and will be updated soon)
[comment]: <> (****)

[comment]: <> (C 1s $`\rightarrow\pi^{\text{*}}`$ resonant transitions)

The `x-ray_scripting_out` pipeline processes X-ray Absorption Spectroscopy (XAS) output data generated by the ORCA quantum chemistry software. Its primary purpose is to leverage the force oscillator strength and transition density matrices to derive the core-virtual coupling molecular orbitals (MOs) represented as matrices.
The updated output format integrates transition intensity from the matrix densities with their force oscillator strengths to build the matrices that describe MOs in the core and virtual spaces. These matrices encapsulate the core-virtual coupling MOs, as exemplified below:

     1. Number of transition intensities
     2. Transition intensity probability
     3. Force oscillator strenght 
     
[comment]: <> (TASK: cite here the paper in the correct equations when get published)

### Getting Started

The pipeline is implemented in Shell script and is best suited for a Linux operating system.
To execute the pipeline, you can use either `manager.sh` or `overall.sh`.

### Prerequisites

The input required to run this pipeline is an XAS output file from ORCA, generated using either `ROCIS/DFT` or `PNO-ROCIS/DFT`. This input file must include the molecular orbital (MO) L&ouml;wdin population and the standard format of the transition intensities and probabilities for each excited state, along with a list of coupling MOs.
You can specify a localized group of atoms involved in the coupling MO transitions, allowing for focused analysis of transitions between two sets of atoms, such as two amino acids in a protein.

### Download

Clone the `x-ray_scripting_out` repository using Git

    $ git clone https://github.com/caraortizmah/x-ray_scripting_out.git

### Run

`manager.sh` is the main script that runs all the scripts following their evident sequential step names. 
The way of running is by typing:

     $ ./manager.sh $1 $2 $3 $4 $5 $6 $7 $8

where:

    `$1` and `$2` are the atom range (initial and final atom) that represents a first molecular region target in the whole protein or peptide calculation
    `$3` and `$4` are the atom range (initial and final atom) that represents a second molecular region target in the whole protein or peptide calculation
    `$5` and `$6` are the core MO range (initial and final MO) corresponding to C 1s (in the furute will be adapt to N, O and S)
    `$7` is the XAS ORCA output
    `$8` is the excited state range described by two numbers jount by the character '-'

### Example:

Using as molecule a pair of amino acids: phenylalanine (F) and tyrosine (Y) face-to-face separated by 4.0\AA.
The F is in the atom range 0 to 22 and Y in the atom range 23 to 46 and the core MOs for C 1s are in the range of 7 to 24.
The information presented in matricial form will come from the ouput `FY_output.out` in the excited-state range number of 1 to 17.

     $ ./manager.sh 0 22 23 46 7 24 FY_output.out 1-17

More information about the running in `example/readme.md`

### Requirements - Linux text processing tool

* grep
* cut
* awk
* sed
* vim
